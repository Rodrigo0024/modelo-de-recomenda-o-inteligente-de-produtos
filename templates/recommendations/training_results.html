{% extends 'recommendations/base.html' %}

{% block title %}Resultado do Treinamento - Sistema de Recomenda√ß√µes{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-8 mx-auto">
        {% if success %}
        <!-- Sucesso -->
        <div class="card shadow-lg border-success">
            <div class="card-header bg-success text-white">
                <h3 class="mb-0">‚úÖ Treinamento Conclu√≠do com Sucesso!</h3>
            </div>
            <div class="card-body">
                <div class="text-center mb-4">
                    <div class="mb-3">
                        <i class="fas fa-check-circle" style="font-size: 4rem; color: #198754;"></i>
                    </div>
                    <h4 class="text-success">Modelo Treinado com Sucesso!</h4>
                    <p class="lead">O algoritmo de recomenda√ß√µes est√° pronto para uso.</p>
                </div>

                <!-- Estat√≠sticas do Treinamento -->
                <div class="card mb-4">
                    <div class="card-header bg-light">
                        <h5 class="mb-0">üìà Resultados do Treinamento</h5>
                    </div>
                    <div class="card-body">
                        <div class="row text-center">
                            <div class="col-md-3 mb-3">
                                <div class="border rounded p-3 bg-primary bg-opacity-10">
                                    <h4 class="text-primary">{{ stats.products_count }}</h4>
                                    <small class="text-muted">Produtos Processados</small>
                                </div>
                            </div>
                            <div class="col-md-3 mb-3">
                                <div class="border rounded p-3 bg-success bg-opacity-10">
                                    <h4 class="text-success">{{ stats.interactions_count }}</h4>
                                    <small class="text-muted">Intera√ß√µes Analisadas</small>
                                </div>
                            </div>
                            <div class="col-md-3 mb-3">
                                <div class="border rounded p-3 bg-warning bg-opacity-10">
                                    <h4 class="text-warning">{{ stats.users_count }}</h4>
                                    <small class="text-muted">Usu√°rios Considerados</small>
                                </div>
                            </div>
                            <div class="col-md-3 mb-3">
                                <div class="border rounded p-3 bg-info bg-opacity-10">
                                    <h4 class="text-info">{{ stats.trained_at|time }}</h4>
                                    <small class="text-muted">Hor√°rio</small>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-3 p-3 bg-light rounded">
                            <p class="mb-1"><strong>Data do Treinamento:</strong> {{ stats.trained_at|date:"d/m/Y H:i" }}</p>
                            <p class="mb-0"><strong>Status:</strong> <span class="badge bg-success">Modelo Ativo</span></p>
                        </div>
                    </div>
                </div>

                <!-- Pr√≥ximos Passos -->
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">üöÄ Pr√≥ximos Passos</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 text-center mb-3">
                                <a href="{% url 'recommendations:user_recommendations' %}" class="btn btn-success btn-lg w-100">
                                    <i class="fas fa-star me-2"></i>
                                    Testar Recomenda√ß√µes
                                </a>
                                <small class="text-muted">Veja as recomenda√ß√µes geradas pelo modelo</small>
                            </div>
                            <div class="col-md-6 text-center mb-3">
                                <a href="{% url 'recommendations:model_status' %}" class="btn btn-info btn-lg w-100">
                                    <i class="fas fa-chart-bar me-2"></i>
                                    Ver Status Detalhado
                                </a>
                                <small class="text-muted">Analise o status completo do modelo</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% else %}
        <!-- Erro -->
        <div class="card shadow-lg border-danger">
            <div class="card-header bg-danger text-white">
                <h3 class="mb-0">‚ùå Erro no Treinamento</h3>
            </div>
            <div class="card-body">
                <div class="text-center mb-4">
                    <div class="mb-3">
                        <i class="fas fa-exclamation-triangle" style="font-size: 4rem; color: #dc3545;"></i>
                    </div>
                    <h4 class="text-danger">Falha no Treinamento</h4>
                    <p class="lead">Ocorreu um erro durante o treinamento do modelo.</p>
                </div>

                <div class="alert alert-danger">
                    <h5>Detalhes do Erro:</h5>
                    <p class="mb-0">{{ error }}</p>
                </div>

                <div class="text-center mt-4">
                    <a href="{% url 'recommendations:train_recommender' %}" class="btn btn-primary me-2">
                        <i class="fas fa-redo me-1"></i>
                        Tentar Novamente
                    </a>
                    <a href="{% url 'recommendations:model_status' %}" class="btn btn-outline-secondary">
                        <i class="fas fa-chart-bar me-1"></i>
                        Ver Status
                    </a>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- Navega√ß√£o -->
        <div class="text-center mt-4">
            <a href="{% url 'recommendations:product_explorer' %}" class="btn btn-outline-primary">
                <i class="fas fa-home me-1"></i>
                Voltar para Home
            </a>
        </div>
    </div>
</div>
{% endblock %}